<app-activity-bar [title]="'Workout Center'">
    <button
        leftSide
        (click)="splitsReorderModalVisibility = true"
        type="button"
    >
        <svg
            class="w-6 py-0.5 h-6 fill-white hover:fill-emerald-500 transition-all active:opacity-50"
            viewBox="0 0 32 32"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
        >
            <path
                d="M27.885 24.115c-0.227-0.226-0.539-0.366-0.885-0.366s-0.658 0.14-0.885 0.366v0l-2.865 2.867v-24.982c0-0.69-0.56-1.25-1.25-1.25s-1.25 0.56-1.25 1.25v0 24.981l-2.866-2.866c-0.226-0.226-0.539-0.366-0.884-0.366-0.691 0-1.251 0.56-1.251 1.251 0 0.346 0.14 0.658 0.367 0.885v0l4.999 5c0.013 0.013 0.031 0.017 0.044 0.029 0.102 0.098 0.222 0.179 0.355 0.237l0.008 0.003 0.001 0c0.142 0.060 0.306 0.096 0.479 0.096 0.345 0 0.657-0.14 0.883-0.365l5-5c0.225-0.227 0.365-0.54 0.365-0.885s-0.139-0.658-0.365-0.885l0 0zM15.884 6.116l-5-5c-0.011-0.011-0.027-0.015-0.039-0.026-0.104-0.1-0.225-0.183-0.359-0.243l-0.008-0.003-0.004-0c-0.129-0.050-0.279-0.079-0.435-0.079-0.072 0-0.144 0.006-0.213 0.018l0.007-0.001c-0.056 0.007-0.106 0.017-0.154 0.030l0.008-0.002c-0.224 0.051-0.418 0.158-0.572 0.306l0.001-0-5 5c-0.224 0.226-0.363 0.537-0.363 0.881 0 0.69 0.56 1.25 1.25 1.25 0.344 0 0.655-0.139 0.881-0.363l2.866-2.866v24.982c0 0.69 0.56 1.25 1.25 1.25s1.25-0.56 1.25-1.25v0-24.982l2.866 2.866c0.226 0.225 0.537 0.363 0.881 0.363 0.69 0 1.25-0.56 1.25-1.25 0-0.344-0.139-0.655-0.363-0.881l0 0z"
            ></path>
        </svg>
    </button>

    @if (proPlan()) {
    <a routerLink="pro" rightSide>
        <svg
            class="w-7 h-7 stroke-amber-500 mb-0.5"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
        >
            <path
                d="M4 8L6 20H18L20 8M4 8L5.71624 9.37299C6.83218 10.2657 7.39014 10.7121 7.95256 10.7814C8.4453 10.8421 8.94299 10.7173 9.34885 10.4314C9.81211 10.1051 10.0936 9.4483 10.6565 8.13476L12 5M4 8C4.55228 8 5 7.55228 5 7C5 6.44772 4.55228 6 4 6C3.44772 6 3 6.44772 3 7C3 7.55228 3.44772 8 4 8ZM20 8L18.2838 9.373C17.1678 10.2657 16.6099 10.7121 16.0474 10.7814C15.5547 10.8421 15.057 10.7173 14.6511 10.4314C14.1879 10.1051 13.9064 9.4483 13.3435 8.13476L12 5M20 8C20.5523 8 21 7.55228 21 7C21 6.44772 20.5523 6 20 6C19.4477 6 19 6.44772 19 7C19 7.55228 19.4477 8 20 8ZM12 5C12.5523 5 13 4.55228 13 4C13 3.44772 12.5523 3 12 3C11.4477 3 11 3.44772 11 4C11 4.55228 11.4477 5 12 5ZM12 4H12.01M20 7H20.01M4 7H4.01"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
            />
        </svg>
    </a>
    } @else {
    <a
        rightSide
        routerLink="/pro"
        class="font-semibold text-yellow-500 transition-all golden-text-shadow active:opacity-50"
    >
        PRO
    </a>
    }
</app-activity-bar>

<div class="flex flex-col items-center justify-center gap-2 p-4 text-center">
    <div class="flex flex-col w-full gap-1">
        <a
            routerLink="editor"
            [queryParams]="{ editView: 'new' }"
            class="flex items-center gap-2 rounded-md bg-neutral-900 bg-opacity-25 w-full p-3.5 focus-visible:outline-emerald-500 relative active:opacity-50 transition-all group outline-none overflow-hidden"
        >
            <svg
                class="w-7 h-7 z-20 fill-white group-hover:fill-emerald-500 transition-colors"
                viewBox="0 0 16 16"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M14.773 3.485l-.78-.184-2.108 2.096-1.194-1.216 2.056-2.157-.18-.792a4.42 4.42 0 0 0-1.347-.228 3.64 3.64 0 0 0-1.457.28 3.824 3.824 0 0 0-1.186.84 3.736 3.736 0 0 0-.875 1.265 3.938 3.938 0 0 0 0 2.966 335.341 335.341 0 0 0-6.173 6.234c-.21.275-.31.618-.284.963a1.403 1.403 0 0 0 .464.967c.124.135.272.247.437.328.17.075.353.118.538.127.316-.006.619-.126.854-.337 1.548-1.457 4.514-4.45 6.199-6.204.457.194.948.294 1.444.293a3.736 3.736 0 0 0 2.677-1.133 3.885 3.885 0 0 0 1.111-2.73 4.211 4.211 0 0 0-.196-1.378zM2.933 13.928a.31.31 0 0 1-.135.07.437.437 0 0 1-.149 0 .346.346 0 0 1-.144-.057.336.336 0 0 1-.114-.11c-.14-.143-.271-.415-.14-.568 1.37-1.457 4.191-4.305 5.955-6.046.1.132.21.258.328.376.118.123.245.237.38.341-1.706 1.75-4.488 4.564-5.98 5.994zm11.118-9.065c.002.765-.296 1.5-.832 2.048a2.861 2.861 0 0 1-4.007 0 2.992 2.992 0 0 1-.635-3.137A2.748 2.748 0 0 1 10.14 2.18a2.76 2.76 0 0 1 1.072-.214h.254L9.649 3.839v.696l1.895 1.886h.66l1.847-1.816v.258zM3.24 6.688h1.531l.705.717.678-.674-.665-.678V6.01l.057-1.649-.22-.437-2.86-1.882-.591.066-.831.849-.066.599 1.838 2.918.424.215zm-.945-3.632L4.609 4.58 4.57 5.703H3.494L2.002 3.341l.293-.285zm7.105 6.96l.674-.673 3.106 3.185a1.479 1.479 0 0 1 0 2.039 1.404 1.404 0 0 1-1.549.315 1.31 1.31 0 0 1-.437-.315l-3.142-3.203.679-.678 3.132 3.194a.402.402 0 0 0 .153.105.477.477 0 0 0 .359 0 .403.403 0 0 0 .153-.105.436.436 0 0 0 .1-.153.525.525 0 0 0 .036-.184.547.547 0 0 0-.035-.184.436.436 0 0 0-.1-.153L9.4 10.016z"
                />
            </svg>

            <div
                class="font-semibold text-xl z-20 group-hover:text-emerald-500 transition-colors"
            >
                Workout Creator
            </div>

            <svg
                class="z-20 stroke-transparent group-hover:stroke-emerald-500 absolute right-6 scale-0 group-hover:scale-100 group-hover:right-0 transition-all top-1/2 -translate-y-1/2 w-10 h-10"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M9 6L15 12L9 18"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
            </svg>

            <div
                class="absolute top-0 z-10 bg-opacity-50 w-full h-full transition-all duration-300 bg-neutral-900 -left-full group-hover:left-0"
            ></div>
        </a>

        <a
            routerLink="editor"
            [queryParams]="{ editView: 'new' }"
            class="flex items-center gap-2 rounded-md bg-neutral-900 bg-opacity-25 w-full p-3.5 focus-visible:outline-emerald-500 relative active:opacity-50 transition-all group outline-none overflow-hidden"
        >
            <svg
                class="w-7 h-7 z-20 mt-1 transition-colors stroke-black rotate-45 dark:stroke-white group-hover:stroke-emerald-500"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M7.4 7H4.6C4.26863 7 4 7.26863 4 7.6V16.4C4 16.7314 4.26863 17 4.6 17H7.4C7.73137 17 8 16.7314 8 16.4V7.6C8 7.26863 7.73137 7 7.4 7Z"
                    stroke-width="1.75"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
                <path
                    d="M19.4 7H16.6C16.2686 7 16 7.26863 16 7.6V16.4C16 16.7314 16.2686 17 16.6 17H19.4C19.7314 17 20 16.7314 20 16.4V7.6C20 7.26863 19.7314 7 19.4 7Z"
                    stroke-width="1.75"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
                <path
                    d="M1 14.4V9.6C1 9.26863 1.26863 9 1.6 9H3.4C3.73137 9 4 9.26863 4 9.6V14.4C4 14.7314 3.73137 15 3.4 15H1.6C1.26863 15 1 14.7314 1 14.4Z"
                    stroke-width="1.75"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
                <path
                    d="M23 14.4V9.6C23 9.26863 22.7314 9 22.4 9H20.6C20.2686 9 20 9.26863 20 9.6V14.4C20 14.7314 20.2686 15 20.6 15H22.4C22.7314 15 23 14.7314 23 14.4Z"
                    stroke-width="1.75"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
                <path
                    d="M8 12H16"
                    stroke-width="1.75"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
            </svg>

            <div
                class="font-semibold text-xl z-20 group-hover:text-emerald-500 transition-colors"
            >
                Quick Workout
            </div>

            <svg
                class="z-20 stroke-transparent group-hover:stroke-emerald-500 absolute right-6 scale-0 group-hover:scale-100 group-hover:right-0 transition-all top-1/2 -translate-y-1/2 w-10 h-10"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M9 6L15 12L9 18"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
            </svg>

            <div
                class="absolute top-0 z-10 bg-opacity-50 w-full h-full transition-all duration-300 bg-neutral-900 -left-full group-hover:left-0"
            ></div>
        </a>

        <a
            routerLink="editor"
            [queryParams]="{ editView: 'new' }"
            class="flex items-center gap-2 rounded-md bg-neutral-900 bg-opacity-25 w-full p-3.5 focus-visible:outline-emerald-500 relative active:opacity-50 transition-all group outline-none overflow-hidden"
        >
            <svg
                class="w-7 h-7 mt-1 z-20 scale-110 stroke-white group-hover:stroke-emerald-500 transition-colors"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M15.5 15.5L19 19"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
                <path
                    d="M5 11C5 14.3137 7.68629 17 11 17C12.6597 17 14.1621 16.3261 15.2483 15.237C16.3308 14.1517 17 12.654 17 11C17 7.68629 14.3137 5 11 5C7.68629 5 5 7.68629 5 11Z"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
            </svg>

            <div
                class="font-semibold text-xl z-20 group-hover:text-emerald-500 transition-colors"
            >
                Explore
            </div>

            <svg
                class="z-20 stroke-transparent group-hover:stroke-emerald-500 absolute right-6 scale-0 group-hover:scale-100 group-hover:right-0 transition-all top-1/2 -translate-y-1/2 w-10 h-10"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M9 6L15 12L9 18"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
            </svg>

            <div
                class="absolute top-0 z-10 bg-opacity-50 w-full h-full transition-all duration-300 bg-neutral-900 -left-full group-hover:left-0"
            ></div>
        </a>

        <button
            type="button"
            (click)="newSplitNameModalVisibility = true"
            class="flex items-center gap-2 rounded-md bg-neutral-900 bg-opacity-25 w-full p-3.5 focus-visible:outline-emerald-500 relative active:opacity-50 transition-all group outline-none overflow-hidden"
        >
            <svg
                class="w-7 h-7 mt-1 z-20 stroke-white group-hover:stroke-emerald-500 transition-colors scale-110"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M6 12H12M18 12H12M12 12V6M12 12V18"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
            </svg>

            <div
                class="font-semibold text-xl z-20 group-hover:text-emerald-500 transition-colors"
            >
                Create Split
            </div>

            <svg
                class="z-20 stroke-transparent group-hover:stroke-emerald-500 absolute right-6 scale-0 group-hover:scale-100 group-hover:right-0 transition-all top-1/2 -translate-y-1/2 w-10 h-10"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M9 6L15 12L9 18"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
            </svg>

            <div
                class="absolute top-0 z-10 bg-opacity-50 w-full h-full transition-all duration-300 bg-neutral-900 -left-full group-hover:left-0"
            ></div>
        </button>
    </div>

    <div class="font-semibold text-lgg my-2">- Workout Splits -</div>

    @if (splits$ | async; as splits) {
    <div cdkDropListGroup class="flex flex-col w-full gap-1 boundary">
        @for (split of splits; track $index) {
        <app-workout-split [splitData]="split"></app-workout-split>
        }
    </div>
    } @else {
    <div class="flex flex-col gap-1 w-full">
        @for (placeholder of [1,2,3,4]; track $index) {
        <div
            data-placeholder
            class="rounded-md bg-neutral-900 bg-opacity-25 h-11 w-full relative overflow-hidden"
        ></div>
        }
    </div>
    }
</div>

@if (newSplitNameModalVisibility) {
<!-- eslint-disable-next-line    -->
<div
    @openClose2
    (click)="newSplitNameModalVisibility = false"
    class="fixed top-0 left-0 z-40 w-screen h-screen bg-black bg-opacity-80"
></div>

<div
    @openClose
    class="fixed left-0 z-50 flex flex-col items-center w-full h-full gap-3 p-4 text-lg rounded-t-md bg-neutral-950"
    [ngClass]="{
        'top-1/2': newSplitNameModalVisibility,
        'top-full': !newSplitNameModalVisibility
    }"
>
    <div class="font-semibold">Split Name:</div>
    <input
        type="text"
        placeholder="Type here..."
        [(ngModel)]="newSplitName"
        maxlength="20"
        class="p-2 font-semibold bg-opacity-50 rounded-md outline-none placeholder-neutral-800 bg-neutral-900 focus:outline-emerald-500 outline-offset-0"
    />
</div>
}

<!-- indent -->

@if (newSplitNameModalVisibility) {
<div
    @openClose3
    class="fixed left-0 z-50 w-full p-4 shadow-md rounded-t-md"
    [ngClass]="{
        'bottom-0': newSplitNameModalVisibility,
        '-bottom-full': !newSplitNameModalVisibility,
    }"
>
    <button
        type="button"
        [disabled]="newSplitName.length === 0"
        (click)="addNewSplit()"
        class="py-1.5 font-semibold rounded-md w-full bg-emerald-500 transition-all active:scale-95 active:opacity-50 hover:shadow-[0_0_20px_2px_#10b981] disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100 disabled:hover:shadow-none"
    >
        Add Split
    </button>
    <button
        type="button"
        (click)="closeNewSplitNameModal()"
        class="py-1.5 mt-2 font-semibold rounded-md w-full bg-neutral-900 transition-all active:scale-95 active:opacity-50 hover:shadow-[0_0_20px_2px_#171717] disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100 disabled:hover:shadow-none"
    >
        Cancel & Close
    </button>
</div>
}

<!-- indent -->

@if (splitsReorderModalVisibility) {
<!-- eslint-disable-next-line -->
<div
    @openClose2
    (click)="splitsReorderModalVisibility = false"
    class="fixed top-0 left-0 z-40 w-screen h-screen bg-black bg-opacity-80"
></div>

<div
    @openClose4
    class="fixed left-0 z-50 flex flex-col items-center w-full h-full gap-2 p-4 text-lg rounded-t-md bg-neutral-950"
    [ngClass]="{
        'top-0': splitsReorderModalVisibility,
        'top-full': !splitsReorderModalVisibility
    }"
>
    <div class="font-semibold">Change splits order:</div>

    @if (splits$ | async; as splits) {
    <div
        (cdkDropListDropped)="changeSplitsOrder($event)"
        cdkDropList
        cdkDragBoundary=".boundary"
        [cdkDropListData]="splits"
        class="flex flex-col w-full gap-1 boundary example-list"
    >
        @for (split of splits; track $index) {
        <div
            cdkDrag
            cdkDragLockAxis="y"
            class="flex items-center justify-between w-full p-2 rounded-md cursor-move example-box"
        >
            <div class="font-semibold select-none">{{ split.name }}</div>

            <svg
                class="w-5 h-5 stroke-white mt-0.5"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M3 5H21"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
                <path
                    d="M3 12H21"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
                <path
                    d="M3 19H21"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
            </svg>
        </div>
        }
    </div>
    }
</div>
}

<!-- indent -->

@if (splitsReorderModalVisibility) {
<div
    @openClose3
    class="fixed left-0 z-50 w-full p-4 shadow-md rounded-t-md"
    [ngClass]="{
        'bottom-0': splitsReorderModalVisibility,
        '-bottom-full': !splitsReorderModalVisibility,
    }"
>
    <button
        type="button"
        (click)="splitsReorderModalVisibility = false"
        class="py-1.5 font-semibold rounded-md w-full bg-emerald-500 transition-all active:scale-95 active:opacity-50 hover:shadow-[0_0_20px_2px_#10b981] disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100 disabled:hover:shadow-none"
    >
        Ok
    </button>
</div>
}
